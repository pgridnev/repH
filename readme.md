# Домашняя работа — README

## 1. Общее описание

Проект реализует CLI-инструмент для учебного конфигурационного языка.
Инструмент:
- читает входной текст из **стандартного ввода (stdin)**;
- выводит результат в формате **JSON в стандартный вывод (stdout)**;
- выявляет синтаксические ошибки и печатает сообщения об ошибках в stderr.

Для разбора используется специализированный инструмент синтаксического разбора (**Lark**).
Поддерживается вычисление константных выражений на этапе трансляции в постфиксной форме `!(...)`.

---

## 2. Описание всех функций и настроек

### 2.1 CLI (`main.py`)

**Назначение:** stdin → JSON в stdout, ошибки → stderr.

**Запуск:**
```bash
python main.py < input.txt
```

**Поведение:**
- При успешном разборе печатает один JSON.
- При синтаксической ошибке печатает сообщение вида:
  - `Синтаксическая ошибка: строка X, столбец Y`
- При ошибке вычисления (например, неизвестное имя) печатает сообщение ошибки.

---

### 2.2 Парсер и вычисления (`parser.py`)

**Поддерживаемый синтаксис:**
- Однострочные комментарии: `* ...`
- Числа: `[1-9][0-9]*`
- Строки: `"..."` (поддерживается экранирование)
- Массивы: `<< значение, значение, ... >>` (возможна вложенность)
- Имена: `[a-z]+` (только маленькие латинские буквы)
- Константы: `var имя = значение`
- Константные выражения (постфикс): `!(...)`

**Операции и функции в `!(...)`:**
- `+` (сложение)
- `-` (вычитание)
- `chr()` (преобразование числа в символ)

**Пример выражения:**
- `var b = !(a 5 -)`
- `var ch = !(x chr())`

---

## 3. Команды для сборки проекта и запуска тестов

Сборка не требуется (Python).

### Требования
- Python 3.10+
- зависимости: `lark`, `pytest`

Установка зависимостей:
```bash
pip install -r requirements.txt
```

Запуск тестов:
```bash
pytest -q
```

---

## 4. Примеры использования

### Пример 1: числа, строки, массивы, комментарии
Ввод:
```text
* comment
var a = 12
var s = "hi"
var arr = << 1, 2, << 3, 4 >> >>
```

Запуск:
```bash
python main.py < examples/example_it.txt
```

Вывод (пример):
```json
{
  "a": 12,
  "s": "hi",
  "arr": [1, 2, [3, 4]]
}
```

### Пример 2: вычисления в постфиксной форме
Ввод:
```text
var a = 10
var b = !(a 5 -)
var c = !(b 7 +)
```

Вывод:
```json
{
  "a": 10,
  "b": 5,
  "c": 12
}
```

### Пример 3: chr()
Ввод:
```text
var x = 65
var ch = !(x chr())
```

Вывод:
```json
{
  "x": 65,
  "ch": "A"
}
```
